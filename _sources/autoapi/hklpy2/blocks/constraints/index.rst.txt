hklpy2.blocks.constraints
=========================

.. py:module:: hklpy2.blocks.constraints

.. autoapi-nested-parse::

   Limitations on acceptable positions for computed 'forward()' solutions.

   Computation of the real-space axis positions given a set of reciprocal-space
   coordinates can have many solutions. One or more constraints (Constraint)
   (a.k.a, cut points), together with a choice of operating *mode*, can:

   * Limit the range of ``forward()`` solutions accepted for that positioner.
   * Declare the value to use when the positioner should be kept constant. (not
     implemented yet)

   .. autosummary::

       ~RealAxisConstraints
       ~ConstraintBase
       ~LimitsConstraint



Attributes
----------

.. autoapisummary::

   hklpy2.blocks.constraints.ENDPOINT_TOLERANCE
   hklpy2.blocks.constraints.UNDEFINED_LABEL


Classes
-------

.. autoapisummary::

   hklpy2.blocks.constraints.ConstraintBase
   hklpy2.blocks.constraints.LimitsConstraint
   hklpy2.blocks.constraints.RealAxisConstraints


Module Contents
---------------

.. py:data:: ENDPOINT_TOLERANCE
   :type:  float
   :value: 1e-07


.. py:data:: UNDEFINED_LABEL
   :type:  str
   :value: 'undefined'


.. py:class:: ConstraintBase

   Bases: :py:obj:`abc.ABC`


   Base class for all constraints for selecting 'forward()' solutions.

   .. autosummary::

       ~_asdict
       ~valid


   .. py:attribute:: _fields
      :type:  List[str]
      :value: []



   .. py:attribute:: label
      :type:  str
      :value: 'undefined'



   .. py:method:: __repr__() -> str

      Return a nicely-formatted string.



   .. py:method:: _asdict() -> hklpy2.misc.KeyValueMap

      Return a new dict which maps field names to their values.



   .. py:method:: _fromdict(config: hklpy2.misc.KeyValueMap, core: Optional[Any] = None)

      Redefine this constraint from a (configuration) dictionary.



   .. py:method:: valid(**values: Dict[str, hklpy2.misc.NUMERIC]) -> bool
      :abstractmethod:


      Is this constraint satisifed by current value(s)?

      PARAMETERS

      values *dict*:
          Dictionary of current 'axis: value' pairs for comparison.



.. py:class:: LimitsConstraint(low_limit: Optional[float] = -180, high_limit: Optional[float] = 180, label: Optional[str] = None)

   Bases: :py:obj:`ConstraintBase`


   Value must fall between low & high limits.

   :param low_limit: Lowest acceptable value for this axis when computing real-space solutions
                     from given reciprocal-space positions.
   :type low_limit: float
   :param high_limit: Highest acceptable value for this axis when computing real-space solutions
                      from given reciprocal-space positions.
   :type high_limit: float
   :param label: Name of the axis for these limits.
   :type label: str
   :param .. autosummary::: ~limits
                            ~valid


   .. py:attribute:: label
      :value: None



   .. py:attribute:: _fields


   .. py:method:: __repr__() -> str

      Return a nicely-formatted string.



   .. py:property:: limits
      :type: tuple[float, float]


      Return the low and high limits of this constraint.


   .. py:method:: valid(**values: Dict[str, hklpy2.misc.NUMERIC]) -> bool

      True if low <= value <= high.

      PARAMETERS

      reals *dict*:
          Dictionary of current 'axis: value' pairs for comparison.



.. py:class:: RealAxisConstraints(reals: List[str])

   Bases: :py:obj:`dict`


   Constraints for every (real) axis of the diffractometer.

   .. autosummary::

       ~_asdict
       ~_fromdict
       ~valid


   .. py:method:: __repr__() -> str

      Return a nicely-formatted string.



   .. py:method:: _asdict() -> hklpy2.misc.KeyValueMap

      Return all constraints as a dictionary.



   .. py:method:: _fromdict(config: hklpy2.misc.KeyValueMap, core=None) -> None

      Redefine existing constraints from a (configuration) dictionary.



   .. py:method:: valid(**reals: Dict[str, hklpy2.misc.NUMERIC]) -> bool

      Are all constraints satisfied?



